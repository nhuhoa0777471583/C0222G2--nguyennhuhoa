<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <th:block th:replace="~{layout :: style }"></th:block>

</head>
<body>
<nav th:replace="~{layout :: nav}"></nav>

<div class="container" style="margin-top: 10%">

    <div class="row">
        <aside class="col-xl-12">
            <div>
                <div>
                    <div><h2>Employee <b>Details</b></h2></div>

                    <table id="dtBasicExample" class="table table-hover table-striped table-bordered container-fluid">
                        <thead>
                        <tr>
                            <td>#</td>
                            <td>service</td>
                            <td>customer</td>
                            <td>star day</td>
                            <td>end day</td>
                            <td>deposit</td>
                            <td>mony total</td>
                            <td colspan="3">attach service</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="contract, loop: ${contractPage}">
                            <td th:text="${loop.count}"></td>
                            <td th:text="${contract.facility.name}"></td>
                            <td th:text="${contract.customer.name}"></td>
                            <td th:text="${contract.startDate}"></td>
                            <td th:text="${contract.endDate}"></td>
                            <td th:text="${contract.deposit}"></td>
                            <td>0</td>

                            <td>
                                <!--Modal add-->
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                        data-bs-target="#exampleModal">
                                    Add(+)
                                </button>
                                <!-- Modal -->
                                <div class="modal fade" th:id="exampleModal" tabindex="-1"
                                     aria-labelledby="exampleModalLabel"
                                     aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <form id="contact" th:action="@{/contract/save}" th:object="${contract}"
                                                      method="post">
                                                    <table>
                                                        <tr>
                                                            <td><input class="form-control" placeholder="id"
                                                                       type="hidden" th:field="*{id}" tabindex="0"></td>
                                                        </tr>
                                                        <tr>
                                                            <td>name service</td>
                                                            <td><input class="form-control"
                                                                       placeholder="nhap ten dich vu"
                                                                       type="text" th:field="*{facility.name}"
                                                                       tabindex="0"></td>
                                                        </tr>
                                                        <tr>
                                                            <td>name customer</td>
                                                            <td><input class="form-control"
                                                                       placeholder="nhap ten khach hang"
                                                                       type="text" th:field="*{customer.name}"
                                                                       tabindex="0"></td>
                                                        </tr>
                                                        <tr>
                                                            <td>start day</td>
                                                            <td><input class="form-control" placeholder="start day"
                                                                       type="date" th:field="*{startDate}" tabindex="1">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>day of birth</td>
                                                            <td><input class="form-control" placeholder="day of birth"
                                                                       type="date" th:field="*{endDate}" tabindex="1">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>id card</td>
                                                            <td><input class="form-control" placeholder="id card"
                                                                       type="text" th:field="*{deposit}" tabindex="1">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>total</td>
                                                            <td><input class="form-control" placeholder="total monney"
                                                                       type="text"
                                                                       tabindex="1">
                                                            </td>
                                                        </tr>
                                                    </table>


                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                                data-dismiss="modal">No
                                                        </button>
                                                        <form th:action="@{/contract/save/}">
                                                            <button type="submit" class="btn btn-primary">Yes</button>
                                                        </form>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <!--   Modal delete-->

                                <button type="button" class="btn btn-primary" data-toggle="modal"
                                        th:data-target="'#exampleModal'+${contract.id}">
                                    Delete
                                </button>

                                <!-- Modal -->
                                <div class="modal fade" th:id="'exampleModal'+${contract.id}" tabindex="-1"
                                     role="dialog"
                                     aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <p> Do you want delete contract have stt is
                                                <p class="text-danger" th:text="+${contract.id}">
                                                </p> have name customers is <p
                                                    class="text-danger" th:text="+${contract.customer.name}"></p></p>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                        data-dismiss="modal">No
                                                </button>
                                                <form th:action="@{/contract/delete(id=${contract.id})}">
                                                    <button type="submit" class="btn btn-primary">Yes</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="col-2 ">
                    <ul class="pagination justify-content-end" th:if="${contractPage.totalPages > 0}">
                        <li class="page-item">
                            <a class="page-link" th:if="${contractPage.hasPrevious()}"
                               th:href="@{'/contract/home'(page=${contractPage.number - 1}, nameSearch = ${nameSearchVal})}">
                                <<
                            </a>
                        </li>
                        <div th:each="item1, loop : ${#numbers.sequence(1, contractPage.totalPages )}">
                            <div th:if="${(contractPage.number + 1) == item1}">
                                <li class="page-item active">
                                    <a class="page-link" href="#" th:text="${item1}"
                                       th:href="@{/contract/home(page=(${item1}-1))}"></a>
                                </li>
                            </div>
                            <div th:unless="${((contractPage.number + 1) == item1)}">
                                <li class="page-item">
                                    <a class="page-link" href="#" th:text="${item1}"
                                       th:href="@{/contract/home(page=(${item1}-1))}"></a>
                                </li>
                            </div>
                        </div>
                        <li class="page-item">
                            <a class="page-link" th:if="${contractPage.hasNext()}"
                               th:href="@{'/contract/home'(page=${contractPage.number + 1}, nameSearch = ${nameSearchVal})}">
                                >>
                            </a>
                        </li>
                    </ul>
                </div>


            </div>
    </aside>
</div>

<!--         Modal message -->
<div>
    <div th:if="${msg != null}" class="modal fade" id="messModal1" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body text-danger" th:text="${msg}"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<footer th:replace="~{layout ::footer}"></footer>
<th:block th:replace="~{layout :: cdn}"></th:block>
</body>

<script>
    $(document).ready(function () {
        $('#messModal1').modal('show')
    })

</script>

</html>